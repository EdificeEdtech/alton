<html>
<head>
    <style type="text/css" media="print">
        body { visibility: hidden; display: none }
    </style>
</head>
<body>
    <div>Below is your secure key, in plain text and in a QR code. Do not write down the code or print out this page, simply enter it into your authentication device and then close this page. If you lose access to your account an administrator can send you a new code.</div>
    <div>Recommended app instructions: <a href="https://support.google.com/accounts/answer/1066447">Google Authenticator</a></div>
    <hr/>
    <div id="container">
        <div id="secure">
            <div>For security reasons, these keys will disappear in <span id="timer"></span> seconds. If you need more time click <a href="#" onclick="timeLeft+=30">here</a> to wait an additional 30 seconds.</div>
            <div id="key">Key: {{ secret }}</div>
            <div id="qr"><img src="data:image/png;base64,{{ image_data }}"/></div>
        </div>
    </div>
    <script type="text/javascript">
        timeLeft = {{ code_display_time }};
        document.getElementById("timer").innerHTML = timeLeft;

        removalTimer = window.setInterval(function() {
            timeLeft--;
            document.getElementById("timer").innerHTML = timeLeft;
            if (timeLeft==0) {
                parent = document.getElementById("container");
                parent.removeChild(document.getElementById("secure"));
                window.clearInterval(removalTimer);
            }
        }, 1000);
    </script>
</body>
</html>